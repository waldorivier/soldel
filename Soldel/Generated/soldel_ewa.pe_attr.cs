//------------------------------------------------------------------------------
// This is auto-generated code.
//------------------------------------------------------------------------------
// This code was generated by Entity Developer tool using NHibernate template.
// Code is generated on: 18.03.2018 17:44:20
//
// Changes to this file may cause incorrect behavior and will be lost if
// the code is regenerated.
//------------------------------------------------------------------------------

using System;
using System.Collections;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Collections.Generic;
using mupeModel.Utils;

namespace mupeModel {

    /// <summary>
    /// There are no comments for pe_attr, Soldel in the schema.
    /// </summary>
    public partial class pe_attr:soldel, INotifyPropertyChanging, INotifyPropertyChanged, i_soldel {

        private static PropertyChangingEventArgs emptyChangingEventArgs = new PropertyChangingEventArgs(System.String.Empty);

        private string _pe_muta_id;

        private string _nom_attr;

        private string _clatit_attr;

        private string _u_version;

        private string _check_attr;

        private string _val_def;

        private string _visibilite;

        private string _identifiant;

        private string _oblig_fac;

        private string _log;

        private string _donnee_traite;

        private int _position;

        private string _groupe;

        private string _user_cre;

        private System.Nullable<System.DateTime> _dh_cre;

        private string _user_maj;

        private System.Nullable<System.DateTime> _dh_maj;

        private string _copy_to;

        private string _from_db;

        private pe_muta _pe_muta;

        #region Extensibility Method Definitions

        /// <summary>
        /// There are no comments for OnCreated in the schema.
        /// </summary>
        partial void OnCreated();

        public override bool Equals(object obj) {
            pe_attr toCompare = obj as pe_attr;
            if(toCompare == null) {
                return false;
            }

            if(!Object.Equals(this.pe_muta_id,toCompare.pe_muta_id))
                return false;
            if(!Object.Equals(this.nom_attr,toCompare.nom_attr))
                return false;
            if(!Object.Equals(this.clatit_attr,toCompare.clatit_attr))
                return false;

            return true;
        }

        public override int GetHashCode() {
            int hashCode = 13;
            hashCode = (hashCode * 7) + pe_muta_id.GetHashCode();
            hashCode = (hashCode * 7) + nom_attr.GetHashCode();
            hashCode = (hashCode * 7) + clatit_attr.GetHashCode();
            return hashCode;
        }

        #endregion
        /// <summary>
        /// There are no comments for pe_attr constructor in the schema.
        /// </summary>
        public pe_attr() {
            this._pe_muta_id = @"";
            this._nom_attr = @"NAN";
            this._clatit_attr = @"base";
            OnCreated();
        }


        /// <summary>
        /// There are no comments for pe_muta_id in the schema.
        /// </summary>
        public virtual string pe_muta_id {
            get {
                return this._pe_muta_id;
            }
            set {
                if(this._pe_muta_id != value) {
                    this.SendPropertyChanging();
                    this._pe_muta_id = value;
                    this.SendPropertyChanged("pe_muta_id");
                }
            }
        }


        /// <summary>
        /// There are no comments for nom_attr in the schema.
        /// </summary>
        public virtual string nom_attr {
            get {
                return this._nom_attr;
            }
            set {
                if(this._nom_attr != value) {
                    this.SendPropertyChanging();
                    this._nom_attr = value;
                    this.SendPropertyChanged("nom_attr");
                }
            }
        }


        /// <summary>
        /// There are no comments for clatit_attr in the schema.
        /// </summary>
        public virtual string clatit_attr {
            get {
                return this._clatit_attr;
            }
            set {
                if(this._clatit_attr != value) {
                    this.SendPropertyChanging();
                    this._clatit_attr = value;
                    this.SendPropertyChanged("clatit_attr");
                }
            }
        }


        /// <summary>
        /// There are no comments for u_version in the schema.
        /// </summary>
        public virtual string u_version {
            get {
                return this._u_version;
            }
            set {
                if(this._u_version != value) {
                    this.SendPropertyChanging();
                    this._u_version = value;
                    this.SendPropertyChanged("u_version");
                }
            }
        }


        /// <summary>
        /// There are no comments for check_attr in the schema.
        /// </summary>
        public virtual string check_attr {
            get {
                return this._check_attr;
            }
            set {
                if(this._check_attr != value) {
                    this.SendPropertyChanging();
                    this._check_attr = value;
                    this.SendPropertyChanged("check_attr");
                }
            }
        }


        /// <summary>
        /// There are no comments for val_def in the schema.
        /// </summary>
        public virtual string val_def {
            get {
                return this._val_def;
            }
            set {
                if(this._val_def != value) {
                    this.SendPropertyChanging();
                    this._val_def = value;
                    this.SendPropertyChanged("val_def");
                }
            }
        }


        /// <summary>
        /// There are no comments for visibilite in the schema.
        /// </summary>
        public virtual string visibilite {
            get {
                return this._visibilite;
            }
            set {
                if(this._visibilite != value) {
                    this.SendPropertyChanging();
                    this._visibilite = value;
                    this.SendPropertyChanged("visibilite");
                }
            }
        }


        /// <summary>
        /// There are no comments for identifiant in the schema.
        /// </summary>
        public virtual string identifiant {
            get {
                return this._identifiant;
            }
            set {
                if(this._identifiant != value) {
                    this.SendPropertyChanging();
                    this._identifiant = value;
                    this.SendPropertyChanged("identifiant");
                }
            }
        }


        /// <summary>
        /// There are no comments for oblig_fac in the schema.
        /// </summary>
        public virtual string oblig_fac {
            get {
                return this._oblig_fac;
            }
            set {
                if(this._oblig_fac != value) {
                    this.SendPropertyChanging();
                    this._oblig_fac = value;
                    this.SendPropertyChanged("oblig_fac");
                }
            }
        }


        /// <summary>
        /// There are no comments for log in the schema.
        /// </summary>
        public virtual string log {
            get {
                return this._log;
            }
            set {
                if(this._log != value) {
                    this.SendPropertyChanging();
                    this._log = value;
                    this.SendPropertyChanged("log");
                }
            }
        }


        /// <summary>
        /// There are no comments for donnee_traite in the schema.
        /// </summary>
        public virtual string donnee_traite {
            get {
                return this._donnee_traite;
            }
            set {
                if(this._donnee_traite != value) {
                    this.SendPropertyChanging();
                    this._donnee_traite = value;
                    this.SendPropertyChanged("donnee_traite");
                }
            }
        }


        /// <summary>
        /// There are no comments for position in the schema.
        /// </summary>
        public virtual int position {
            get {
                return this._position;
            }
            set {
                if(this._position != value) {
                    this.SendPropertyChanging();
                    this._position = value;
                    this.SendPropertyChanged("position");
                }
            }
        }


        /// <summary>
        /// There are no comments for groupe in the schema.
        /// </summary>
        public virtual string groupe {
            get {
                return this._groupe;
            }
            set {
                if(this._groupe != value) {
                    this.SendPropertyChanging();
                    this._groupe = value;
                    this.SendPropertyChanged("groupe");
                }
            }
        }


        /// <summary>
        /// There are no comments for user_cre in the schema.
        /// </summary>
        public virtual string user_cre {
            get {
                return this._user_cre;
            }
            set {
                if(this._user_cre != value) {
                    this.SendPropertyChanging();
                    this._user_cre = value;
                    this.SendPropertyChanged("user_cre");
                }
            }
        }


        /// <summary>
        /// There are no comments for dh_cre in the schema.
        /// </summary>
        public virtual System.Nullable<System.DateTime> dh_cre {
            get {
                return this._dh_cre;
            }
            set {
                if(this._dh_cre != value) {
                    this.SendPropertyChanging();
                    this._dh_cre = value;
                    this.SendPropertyChanged("dh_cre");
                }
            }
        }


        /// <summary>
        /// There are no comments for user_maj in the schema.
        /// </summary>
        public virtual string user_maj {
            get {
                return this._user_maj;
            }
            set {
                if(this._user_maj != value) {
                    this.SendPropertyChanging();
                    this._user_maj = value;
                    this.SendPropertyChanged("user_maj");
                }
            }
        }


        /// <summary>
        /// There are no comments for dh_maj in the schema.
        /// </summary>
        public virtual System.Nullable<System.DateTime> dh_maj {
            get {
                return this._dh_maj;
            }
            set {
                if(this._dh_maj != value) {
                    this.SendPropertyChanging();
                    this._dh_maj = value;
                    this.SendPropertyChanged("dh_maj");
                }
            }
        }


        /// <summary>
        /// There are no comments for copy_to in the schema.
        /// </summary>
        public virtual string copy_to {
            get {
                return this._copy_to;
            }
            set {
                if(this._copy_to != value) {
                    this.SendPropertyChanging();
                    this._copy_to = value;
                    this.SendPropertyChanged("copy_to");
                }
            }
        }


        /// <summary>
        /// There are no comments for from_db in the schema.
        /// </summary>
        public virtual string from_db {
            get {
                return this._from_db;
            }
            set {
                if(this._from_db != value) {
                    this.SendPropertyChanging();
                    this._from_db = value;
                    this.SendPropertyChanged("from_db");
                }
            }
        }

        /// <summary>
        /// There are no comments for pe_muta in the schema.
        /// </summary>
        public virtual pe_muta pe_muta {
            get {
                return this._pe_muta;
            }
            set {
                if(this._pe_muta != value) {
                    this.SendPropertyChanging();
                    this._pe_muta = value;
                    this.SendPropertyChanged("pe_muta");
                }
            }
        }

        public virtual IList<pe_libl> pe_libl_list {
            get {
                IList<pe_libl> libl_list = null;

                libl_list = pe_muta.pe_ip.pe_libl_list.Where<pe_libl>(x => x.nom_attr.Equals(nom_attr)).ToList<pe_libl>();
                if(libl_list.Count == 0) {

                    // recherche dans le dictionnaire des attributs
                    try {
                        var dict = hibernate_util.get_instance().get_attr_dict_list().Where<pe_dict>(x => x.nom_dict.Equals(nom_attr) &
                                                                                                     x.clatit_dict.Equals(clatit_attr)).ToList<pe_dict>().First();
                    } catch (Exception e ) {
                        throw (new Exception("L'attribut -> " + nom_attr + " " + clatit_attr + " n'a pas de correpondance dans le dictionnaire"));
                    }

                    //if(dict != null) {
                    //    libl_list = new List<pe_libl>();
                    //    libl_list.Add(new pe_libl() {
                    //        libf_attr = dict.libf_dict,
                    //        libd_attr = dict.libd_dict,
                    //        libe_attr = dict.libe_dict,
                    //        libi_attr = dict.libi_dict
                    //    });
                    //}
                }
                return libl_list;
            }
        }

        public virtual event PropertyChangingEventHandler PropertyChanging;

        public virtual event PropertyChangedEventHandler PropertyChanged;

        protected virtual void SendPropertyChanging() {
            var handler = this.PropertyChanging;
            if(handler != null)
                handler(this,emptyChangingEventArgs);
        }

        protected virtual void SendPropertyChanging(System.String propertyName) {
            var handler = this.PropertyChanging;
            if(handler != null)
                handler(this,new PropertyChangingEventArgs(propertyName));
        }

        protected virtual void SendPropertyChanged(System.String propertyName) {
            var handler = this.PropertyChanged;
            if(handler != null)
                handler(this,new PropertyChangedEventArgs(propertyName));
        }
           
       public virtual i_soldel shallow_copy(pe_muta muta) {
            var copy = new pe_attr();

            copy_object.copy<pe_attr>(this,copy);

            copy.pe_muta_id = muta.pe_muta_id;
            copy.pe_muta = muta;

            // copie des libellés qui sont référencés par l'ip
            if(pe_libl_list.Count > 0) {
                copy.pe_muta.pe_ip.add_libl(pe_libl_list.First().shallow_copy());
            }

            return copy;
        }

        #region I_SOLDEL

        bool i_soldel.is_persistant() {
            return true;
        }

        void i_soldel.add_child(object child) {
            throw new NotImplementedException();
        }

        bool i_soldel.can_add_child(object child) {
            throw new NotImplementedException();
        }

        bool i_soldel.can_remove_me() {
            return true;
        }

        void i_soldel.remove_me() {

            this.pe_muta.pe_attr_list.Remove(this);
        }

        #endregion

        public virtual IList<String> visibility_list {
            get {
                return new List<String>() { " ","F","T","D" };
            }
        }

        #region DATAGRID

        public static IList<string> columns_to_display = new List<string>() { "user_maj", "dh_maj", "nom_attr", "clatit_attr",
                                                                              "val_def", "visibilite", "identifiant", "oblig_fac",
                                                                              "log", "donnee_traite", "position", "copy_to", "from_db"};


        public static IList<string> columns_read_only = new List<string>() { "nom_attr", "clatit_attr"};

        #endregion
    }
}
